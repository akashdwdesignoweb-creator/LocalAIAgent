<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Pizza Reviews QA</title>
    <style>
      body { font-family: Arial, sans-serif; max-width: 800px; margin: 40px auto; }
      textarea { width: 100%; height: 100px; }
      #answer { white-space: pre-wrap; background:#f7f7f7; padding:10px; border-radius:6px; }
      #reviews { white-space: pre-wrap; font-size:0.9em; color:#333; background:#fff; padding:10px; border-radius:6px; border:1px solid #ddd; }
    </style>
  </head>
  <body>
    <h1>Pizza Reviews QA</h1>
    <p>Ask a question about the restaurant and the model will answer using relevant reviews.</p>

    <label for="question">Question</label>
    <input type="text" id="question" style="width:100%" />
    <button id="ask">Ask</button>

    <h3>Answer</h3>
    <div id="answer">No answer yet</div>

    <h3>Retrieved Reviews</h3>
    <div id="reviews">No reviews yet</div>

    <script>
      const askBtn = document.getElementById('ask');
      askBtn.addEventListener('click', async () => {
        const question = document.getElementById('question').value;
        const res = await fetch('/ask', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({question})
        });
        const data = await res.json();
        if (data.error) {
          document.getElementById('answer').textContent = 'Error: ' + data.error;
        } else {
          document.getElementById('answer').textContent = data.answer || 'No answer';
          document.getElementById('reviews').textContent = data.reviews || 'No reviews retrieved';
        }
      });
    </script>
  </body>
</html>